<% values = object.all_custom_attribute_values %>

<% values.each do |value| %>
  <div class="attribute">
    <% prefix = "#{ object.class.name.underscore }[set_custom_attribute_values]" %>
    <% fields_for(prefix, value) do |f| %>
      <%= f.hidden_field(:custom_attribute_id, :index => nil) %>

      <label><%= value.custom_attribute.display_name %></label>
      <% if value.custom_attribute.max_length.to_i >= 100 -%>
        <%= f.text_area(:value, :index => nil) %>
      <% else -%>
        <%= f.text_field(:value, :index => nil) %>
      <% end -%>
      <%= multi_links(value) %>
    <% end %>
    
    <br clear="both" />
  </div>
<% end %>
